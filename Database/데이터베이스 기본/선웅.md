# 데이터베이스 기본

## 데이터베이스 목적
데이터베이스 시스템이 등장하기 전까지는 운영체제의 의해 지원되는 파일 시스템을 통해 데이터를 관리하였다. 이 때 여러가지 문제점이 존재하는데, 데이터베이스 시스템의 목적은 이 문제점을 해결하기 위하는 데 있다. 
**파일 시스템을 사용했을 때의 주요 문제점**은 다음과 같다.

- 데이터의 중복과 비일관성
- 데이터 접근 시 필요한 데이터를 편리하고 효율적으로 검색하기 어려움
- 데이터가 여러 파일에 흩어져 있고 파일 형식의 다양함
- 데이터 동시 접근 시 데이터의 업데이트 오류
- 무결성 문제
- 보안 문제

데이터베이스는 여러 사람들이 공유하여 사용할 목적으로 체계화해 통합, 관리하는 데이터의 집합을 말한다. 
DBMS를 통해 요구를 처리하고, SQL을 사용해 데이터에 접근한다. 
**데이터베이스**는 다음의 **장점**을 가진다.

- 데이터의 논리적, 물리적 독립성, 일관성, 무결성, 보안성 보장
- 데이터 중복 최소화
- 저장된 자료를 공동으로 이용가능
- 데이터를 통합하여 관리
- 데이터의 실시간 처리가 가능

한편 **단점**도 존재한다.

- 전산화 비용이 증가
- 대용량 디스크로의 집중적인 Access로 과부하(Overhead)가 발생

## 데이터베이스 언어

### DDL (Data Definition Language) : 데이터 정의어

- CREATE, ALTER, DROP, RENAME
- 데이터베이스 객체(table, view, index...)의 구조를 정의 (생성, 변경, 제거)

### DML (Data Manipulation Language) : 데이터 조작어

- INSERT, SELECT, UPDATE, DELETE
- 데이터베이스 테이블의 레코드를 CRUD (Create, Read, Update, Delete)

### DCL (Data Control Language) : 데이터 제어어

- GRANT, REVOKE
- 데이터베이스와 그 구조에 대한 접근 권한을 제공하거나 제거

### TCL (Transaction Control Language) : 트랜잭션 제어어

- COMMIT, ROLLBACK, Savepoint
- DML 명령문으로 수행한 변경을 관리 (트랜잭션 관리)


## 데이터 모델링

### 데이터 모델링의 3가지 요소
- Entity (대상) : 업무가 관리하고자 하는 대상 객체
- Relationship (관계) : 엔티티 간의 관계
- Attribute (속성) : 릴레이션에서 관리하는 구체적이며 고유한 이름을 갖는 정보

### 데이터 모델링의 3단계
- 개념적 모델링 : 업무의 핵심 엔티티(Entity)를 추출하는 단계, 이후 Entity들의 관계를 표현하기 위해 ERD 작성
- 논리적 모델링 : 개념적 모델링의 결과를 토대로 세부속성, 식별자, 관계 등을 표현하는 단계, 데이터 정규화 수행
- 물리적 모델링 : 논리적 모델링이 끝나면 이를 직접 물리적으로 생성하는 과정

### 스키마의 3단계 구조
스키마: 데이터베이스의 구조와 제약조건에 관한 전반적인 명세를 기술한 메타데이터의 집합
-  외부 스키마 : 사용자가 보는 관점에서 데이터베이스 스키마를 정의 (view)
-  개념 스키마 : 사용자 관점의 데이터베이스 스키마를 통합하여 데이터베이스의 전체 논리적 구조를 정의 (DB의 개체, 속성, 관계, 데이터 타입 등)
-  내부 스키마 : 데이터가 물리적을 어떻게 저장되는지 정의 (데이터의 저장구조, 컬럼, 인덱스 등)

## 관계
한 엔티티의 인스턴스가 다른 엔티티의 인스턴스와 어떻게 연결되는지 나타내는 표현

- 1대1 관계 : 하나의 엔티티에 관계되는 엔티티가 반드시 하나로 존재하는 경우
- 1대N 관계 : 엔티티 하나의 행에 다른 엔티티의 값이 여러개 있는 관계
- N대M 관계 : 두 엔티티 사이의 다대다 연결관계가 있는 경우, 테이블 두 개를 직접적으로 연결해서 구축하지 않고 1:N, 1:M이라는 관계를 갖는 테이블 두 개로 나눠서 설정


## 키
키란, DB에서 조건을 만족하는 레코드를 찾거나 순서대로 정렬할 때 레코드를 구분할 수 있는 기준이 되는 속성이다.

1. 슈퍼키(super key)
2. 후보키(candidate key)
3. 기본키(primary key)
4. 대체키(alternate key)
5. 외래키(foreign key)
6. 복합키(composite key)

### 유일성과 최소성

- 유일성
    
    하나의 키 값으로 튜플을 유일하게 식별할 수 있는 성질(unique)
    
- 최소성
    
    키를 구성하는 속성들 중 꼭 필요한 최소한의 속성들로만 키를 구성하는 성질
    
    ex) 사람을 구분할 때 [`주민번호`, `이름`]으로 구성되어있다면 최소성을 만족하지 않음
    

1. 슈퍼키 
    - 유일성O, 최소성X
    
    유일성의 특성을 만족하는 속성들의 집합. 서로 구분이 가능함
    
    ex), [주민번호], [주민번호,이름], [주민번호,이름,나이]
    
2. 후보키
    - 유일성O, 최소성O
    
    슈퍼키 + 최소성을 만족함
    
    ex) [주민번호]
    
3. 기본키
    - 유일성O, 최소성O
    
    후보키중에서 선택됨, 레코드를 식별할 때 기준이 되는 키.
    
    변동이 작은 키를 선택하고, `NULL` 이 가능하면 안된다.
    
4. 외래키

테이블간의 관계를 나타낼 때 사용되며, 다른 테이블의 **기본키**를 참조한다.

외래키를 설정하는 이유는 **데이터 무결성(Integrity)** 때문이다.

> 데이터 무결성 : 항상 정확한 값을 유지하는 성질


1. 복합키
    
    두 개 이상의 컬럼을 묶어 하나의 기본키로 지정
    
2. 대체키
    
    기본키를 제외한 후보키

## 데이터의 무결성

데이터의 무결성은, **데이터의 정확성, 일관성, 유효성을 유지하는 것**이다.

### 개체 무결성

모든 테이블이 기본키로 선택된 필드를 가져야 하며 기본 키로 선택된 필드는 고유한 값을 가져야 한다.

그리고 NULL이 허용되지 않는다.

### 참조 무결성

참조 관계에 있는 두 테이블의 데이터가 **항상 일관된 값**을 가져야 한다.

### 도메인 무결성

테이블에 존재하는 필드의 무결성을 보장하기 위해 필드의 타입, NULL허용 등을 정의하고 올바른 데이터를 확인하는 과정

## Reference
- 면접을 위한 CS 전공지식 노트 P184-198
- [Basic Knowledge of Computer Science](https://github.com/Seogeurim/CS-study)
- [gyoogle/tech-interview-for-developer](https://github.com/gyoogle/tech-interview-for-developer)
